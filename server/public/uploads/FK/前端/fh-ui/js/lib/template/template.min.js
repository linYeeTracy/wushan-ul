/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/

!function(){var h=function(e,n){return"string"==typeof n?s(n,{filename:e}):t(e,n)};h.version="3.0.0",h.config=function(e,n){o[e]=n};var o=h.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},c=h.cache={};h.render=function(e,n){return s(e)(n)};var t=h.renderFile=function(e,n){var t=h.get(e)||l({filename:e,name:"Render Error",message:"Template not found"});return n?t(n):t};h.get=function(e){var n;if(c[e])n=c[e];else if("object"==typeof document){var t=document.getElementById(e);if(t){var r=(t.value||t.innerHTML).replace(/^\s*|\s*$/g,"");n=s(r,{filename:e})}}return n};var r=function(e,n){return"string"!=typeof e&&("number"===(n=typeof e)?e+="":e="function"===n?r(e.call(e)):""),e},n={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},a=function(e){return n[e]},i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},w=h.utils={$helpers:{},$include:t,$string:r,$escape:function(e){return r(e).replace(/&(?![\w#]+;)|[<>"']/g,a)},$each:function(e,n){var t,r;if(i(e))for(t=0,r=e.length;t<r;t++)n.call(e,e[t],t,e);else for(t in e)n.call(e,e[t],t)}};h.helper=function(e,n){x[e]=n};var x=h.helpers=w.$helpers;h.onerror=function(e){var n="Template Error\n\n";for(var t in e)n+="<"+t+">\n"+e[t]+"\n\n";"object"==typeof console&&console.error(n)};var l=function(e){return h.onerror(e),function(){return"{Template Error}"}},s=h.compile=function(t,r){for(var e in r=r||{},o)void 0===r[e]&&(r[e]=o[e]);var a=r.filename;try{var i=function(e,i){var o=i.debug,n=i.openTag,r=i.closeTag,c=i.parser,t=i.compress,l=i.escape,s=1,u={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},a="".trim,f=a?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],p=a?"$out+=text;return $out;":"$out.push(text);",$="function(){var text=''.concat.apply('',arguments);"+p+"}",d="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+p+"}",g="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),h=f[0],m="return new String("+f[3]+");";j(e.split(n),function(e){var n=(e=e.split(r))[0],t=e[1];1===e.length?h+=b(n):(h+=function(e){var n=s;c?e=c(e,i):o&&(e=e.replace(/\n/g,function(){return"$line="+ ++s+";"}));if(0===e.indexOf("=")){var t=l&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),t){var r=e.replace(/\s*\([^\)]+\)/,"");w[r]||/^(include|print)$/.test(r)||(e="$escape("+e+")")}else e="$string("+e+")";e=f[1]+e+f[2]}o&&(e="$line="+n+";"+e);return j((a=e,a.replace(T,"").replace(k,",").replace(E,"").replace(S,"").replace(W,"").split(A)),function(e){var n;e&&!u[e]&&(n="print"===e?$:"include"===e?d:w[e]?"$utils."+e:x[e]?"$helpers."+e:"$data."+e,g+=e+"="+n+",",u[e]=!0)}),e+"\n";var a}(n),t&&(h+=b(t)))});var v=g+h+m;o&&(v="try{"+v+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+R(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var y=new Function("$data","$filename",v);return y.prototype=w,y}catch(e){throw e.temp="function anonymous($data,$filename) {"+v+"}",e}function b(e){return s+=e.split(/\n/).length-1,t&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=f[1]+R(e)+f[2]+"\n"),e}}(t,r)}catch(e){return e.filename=a||"anonymous",e.name="Syntax Error",l(e)}function n(n){try{return new i(n,a)+""}catch(e){return r.debug?l(e)():(r.debug=!0,s(t,r)(n))}}return n.prototype=i.prototype,n.toString=function(){return i.toString()},a&&r.cache&&(c[a]=n),n},j=w.$each,T=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,k=/[^\w$]+/g,E=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),S=/^\d[^,]*|,\d[^,]*/g,W=/^,+|,+$/g,A=/^$|,+/;function R(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}o.openTag="{{",o.closeTag="}}";o.parser=function(e,n){var t,r,a,i,o,c=(e=e.replace(/^\s/,"")).split(" "),l=c.shift(),s=c.join(" ");switch(l){case"if":e="if("+s+"){";break;case"else":e="}else"+(c="if"===c.shift()?" if("+c.join(" ")+")":"")+"{";break;case"/if":e="}";break;case"each":var u=c[0]||"$data";"as"!==(c[1]||"as")&&(u="[]"),e="$each("+u+",function("+((c[2]||"$value")+","+(c[3]||"$index"))+"){";break;case"/each":e="});";break;case"echo":e="print("+s+");";break;case"print":case"include":e=l+"("+c.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(s)){var f=!0;0===e.indexOf("#")&&(e=e.substr(1),f=!1);for(var p=0,$=e.split("|"),d=$.length,g=$[p++];p<d;p++)t=g,r=$[p],o=a=void 0,a=r.split(":"),i=a.shift(),(o=a.join(":")||"")&&(o=", "+o),g="$helpers."+i+"("+t+o+")";e=(f?"=":"=#")+g}else e=h.helpers[l]?"=#"+l+"("+c.join(",")+");":"="+e}return e},"object"==typeof exports&&"undefined"!=typeof module?module.exports=h:"function"==typeof define?define(function(){return h}):this.template=h}();